:root {
    --bg-deep: #0b0c10;
    --bg-glass: rgba(31, 40, 51, 0.85);
    --border: rgba(102, 252, 241, 0.15);
    --text-main: #e6edf3;
    --text-muted: #8b949e;
    --cyan: #66fcf1;
    --cyan-dim: #45a29e;
    --danger: #ff4d6d;
    --warning: #ffb703;
    --purple: #9d4edd;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: 'Inter', sans-serif;
    background-color: var(--bg-deep);
    color: var(--text-main);
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    background-image: radial-gradient(circle at 10% 20%, rgba(11, 12, 16, 0.9) 0%, #000 90%);
}

/* Utility Classes */
.glass {
    background: var(--bg-glass);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--border);
}

/* Header */
header {
    height: 60px;
    padding: 0 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    z-index: 1000;
    border-bottom: 1px solid var(--border);
    background: rgba(11, 12, 16, 0.95);
    flex-shrink: 0;
}

.brand { display: flex; align-items: center; gap: 12px; }
.brand-logo { font-family: 'JetBrains Mono', monospace; font-weight: 700; font-size: 1.1rem; color: var(--cyan); }
.brand-meta { font-size: 0.7rem; background: rgba(255, 77, 109, 0.15); color: var(--danger); padding: 3px 8px; border-radius: 4px; border: 1px solid rgba(255, 77, 109, 0.3); }

.nav-tabs { display: flex; gap: 10px; background: rgba(0,0,0,0.3); padding: 4px; border-radius: 6px; }
.nav-btn {
    background: none; border: none; color: var(--text-muted); font-weight: 600; cursor: pointer;
    padding: 6px 14px; border-radius: 4px; transition: all 0.2s ease; font-size: 0.8rem;
    display: flex; align-items: center; gap: 8px;
}
.nav-btn:hover { color: var(--text-main); }
.nav-btn.active { background: var(--cyan-dim); color: #fff; box-shadow: 0 0 10px rgba(102, 252, 241, 0.2); }

/* Layout */
.main-container { display: flex; height: calc(100vh - 60px); width: 100%; overflow: hidden; }

.sidebar {
    width: 300px;
    display: flex;
    flex-direction: column;
    z-index: 20;
    padding: 20px;
    gap: 15px;
    border-right: 1px solid var(--border);
    overflow-y: auto;
    background: rgba(11, 12, 16, 0.95);
    flex-shrink: 0;
}

.content-area { flex: 1; position: relative; background-color: #000; overflow: hidden; }

/* KPIs */
.kpi-card {
    border-radius: 6px; padding: 15px; position: relative; overflow: hidden;
    background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
}
.kpi-card::before { content: ''; position: absolute; top: 0; left: 0; width: 3px; height: 100%; background: var(--cyan); }
.kpi-card.danger::before { background: var(--danger); }
.kpi-card.warning::before { background: var(--warning); }

.kpi-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted); margin-bottom: 5px; }
.kpi-val { font-family: 'JetBrains Mono', monospace; font-size: 1.6rem; font-weight: 700; color: #fff; }
.kpi-sub { font-size: 0.75rem; margin-top: 5px; opacity: 0.7; }

/* Views */
.view-section {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    visibility: hidden; opacity: 0; z-index: 0;
    transition: opacity 0.3s ease;
}
.view-section.active { visibility: visible; opacity: 1; z-index: 10; }

/* Map */
#map-wrapper { width: 100%; height: 100%; position: relative; }
#mainMap { height: 100%; width: 100%; background: #0b0c10; }

.map-overlay-controls {
    position: absolute;
    top: 20px;
    right: 20px;
    background-color: #66fcf1;
    z-index: 1000;
 
    padding: 20px; /* Increased padding for larger size */
    border-radius: 8px;
    width: 250px; /* Increased width for larger size */
    font-size: 1rem; /* Increased font size for better readability */
}

.toggle-row { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; cursor: pointer; color: var(--text-muted); font-size: 0.8rem; }
.toggle-row:hover { color: #fff; }

/* Analytics Grid */
.analytics-grid {
    padding: 20px;
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 20px;
    overflow-y: auto;
    height: 100%;
    padding-bottom: 50px;
}

.chart-card {
    border-radius: 8px; padding: 20px; display: flex; flex-direction: column;
    background: var(--bg-glass); border: 1px solid var(--border);
    min-height: 350px;
}

.chart-header {
    display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;
    border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 10px;
}
.chart-title { font-size: 0.95rem; font-weight: 600; color: #fff; display: flex; align-items: center; gap: 8px; }
.chart-container { flex: 1; position: relative; width: 100%; min-height: 0; }

/* Grid System */
.col-12 { grid-column: span 12; }
.col-6 { grid-column: span 6; }
.col-4 { grid-column: span 4; }

/* File Upload */
.upload-area {
    border: 1px dashed var(--cyan-dim); background: rgba(69, 162, 158, 0.1);
    padding: 15px; border-radius: 6px; text-align: center; margin-bottom: 15px;
}
.btn-upload {
    background: var(--cyan-dim); color: #fff; border: none; padding: 8px 16px;
    border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: 600; margin-top: 8px;
    width: 100%; transition: 0.2s;
}
.btn-upload:hover { background: var(--cyan); }

/* Popups */
.bird-popup h3 { color: var(--cyan); border-bottom: 1px solid #333; padding-bottom: 5px; margin-bottom: 5px; }
.popup-row { display: flex; justify-content: space-between; font-size: 0.8rem; margin: 4px 0; color: #ccc; }
.leaflet-popup-content-wrapper { background: rgba(10,10,10,0.95); backdrop-filter: blur(5px); border: 1px solid var(--cyan); color: #fff; }
.leaflet-popup-tip { background: rgba(10,10,10,0.95); }

/* Scrollbars */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: #000; }
::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--cyan-dim); }

@media (max-width: 1200px) { .col-4, .col-6 { grid-column: span 12; } .sidebar { width: 260px; } }
@media (max-width: 768px) { .sidebar { display: none; } .main-container { flex-direction: column; } }